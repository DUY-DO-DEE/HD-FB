<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIP Reception - DUYDODEE-HD</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé¨</text></svg>">

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root {
    --primary: #ff4e00;
    --primary-glow: rgba(255, 78, 0, 0.5);
    --bg-dark: #050505;
}

* { box-sizing: border-box; }
body {
    margin: 0; font-family: 'Prompt', sans-serif; color: #fff;
    background: var(--bg-dark);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-x: hidden;
}

/* Background Effect */
.bg-aura {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 600px; height: 600px; background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%);
    filter: blur(80px); z-index: -1; pointer-events: none; opacity: 0.5;
}

.loading-state { font-size: 20px; text-align: center; }

/* VIP Card */
.vip-card {
    max-width: 500px; width: 90%;
    background: rgba(20, 20, 20, 0.7);
    backdrop-filter: blur(25px);
    border-radius: 40px;
    padding: 40px;
    border: 1px solid rgba(255, 78, 0, 0.3);
    box-shadow: 0 25px 50px rgba(0,0,0,0.5), inset 0 0 20px rgba(255, 78, 0, 0.1);
    text-align: center;
    animation: fadeIn 0.8s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

.vip-logo { width: 150px; margin-bottom: 20px; filter: drop-shadow(0 0 15px var(--primary)); }
.welcome-text { font-size: 14px; color: var(--primary); letter-spacing: 3px; font-weight: 600; margin-bottom: 10px; text-transform: uppercase; }
.movie-name { font-size: 28px; font-weight: 600; margin-bottom: 30px; line-height: 1.3; }

.action-buttons { display: flex; flex-direction: column; gap: 15px; }

.btn {
    padding: 18px 30px; border-radius: 50px; border: none; font-size: 16px;
    font-weight: 500; cursor: pointer; text-decoration: none;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    font-family: 'Prompt';
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏ß‡πá‡∏ö */
.btn-vip {
    background: linear-gradient(135deg, #ff4e00, #ff8000);
    color: #fff;
    box-shadow: 0 10px 25px rgba(255, 78, 0, 0.4);
    display: flex; align-items: center; justify-content: center; gap: 10px;
}
.btn-vip:hover { transform: scale(1.05); box-shadow: 0 15px 35px rgba(255, 78, 0, 0.6); }

/* ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏° */
.btn-info {
    background: rgba(255,255,255,0.05);
    color: #ccc;
    border: 1px solid rgba(255,255,255,0.1);
}
.btn-info:hover { background: rgba(255,255,255,0.1); color: #fff; border-color: #fff; }

.btn-back { font-size: 14px; color: #666; margin-top: 20px; display: inline-block; text-decoration: none; }
.btn-back:hover { color: #999; }

/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠ */
.detail-section {
    display: none;
    margin-top: 30px;
    text-align: left;
    border-top: 1px solid rgba(255,255,255,0.1);
    padding-top: 25px;
    animation: slideDown 0.5s ease-out forwards;
}

@keyframes slideDown {
    from { opacity: 0; height: 0; }
    to { opacity: 1; height: auto; }
}

.detail-section p { color: #aaa; line-height: 1.8; font-size: 15px; }
.poster-preview { width: 100%; border-radius: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }

@media (max-width: 480px) {
    .vip-card { padding: 30px 20px; }
    .movie-name { font-size: 22px; }
}
</style>
</head>
<body>

<div class="bg-aura"></div>

<div id="loadingState" class="loading-state">
    <div style="color: var(--primary); margin-bottom: 15px;">üé¨</div>
    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå VIP...
</div>

<div id="main-card" class="vip-card" style="display: none;">
    <img src="https://api.clippingmagic.com/v1/images/69865063-8636-4740-994c-83607062227d/preview.jpg" alt="Logo" class="vip-logo">
    <div class="welcome-text">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÅ‡∏Ç‡∏Å VIP</div>
    <div id="movieTitle" class="movie-name">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå</div>

    <div class="action-buttons">
        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏¥‡∏á‡∏Ñ‡πå‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å -->
        <a id="btnRedirect" href="#" class="btn btn-vip">
            üöÄ ‡∏£‡∏±‡∏ö‡∏ä‡∏°‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ (‡∏£‡∏∞‡∏ö‡∏ö VIP)
        </a>
        
        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
        <button onclick="toggleDetails()" class="btn btn-info">
            üìñ ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö
        </button>
    </div>

    <div id="detailSection" class="detail-section">
        <img id="moviePoster" src="" alt="Poster" class="poster-preview">
        <p id="movieDesc"></p>
        <div id="videoContainer" style="margin-top: 20px;"></div>
    </div>

    <a href="index.html" class="btn-back">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyAcCn0NGbakHmLEa_G47K8OepGaRqTV02Q",
      authDomain: "duydodeesport.firebaseapp.com",
      projectId: "duydodeesport",
      storageBucket: "duydodeesport.appspot.com",
      appId: "1:435929814225:web:fcb01803d9e5b77340e1f0"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ‡∏î‡∏∂‡∏á‡πÑ‡∏≠‡∏î‡∏µ‡∏à‡∏≤‡∏Å URL
    const params = new URLSearchParams(window.location.search);
    const movieId = params.get("id");

    async function initVIPPage() {
        if (!movieId) {
            window.location.href = 'index.html';
            return;
        }

        try {
            const doc = await db.collection('movies').doc(movieId).get();
            if (doc.exists) {
                const data = doc.data();
                
                // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πâ‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÄ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ URL ‡∏à‡∏≤‡∏Å‡πÑ‡∏≠‡∏î‡∏µ ---
                // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: const myUrl = data.link; 
                // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏™‡πà Logic ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏õ‡∏•‡∏á URL ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
                
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
                document.title = "VIP: " + (data.title || "Unknown");
                document.getElementById('movieTitle').innerText = data.title || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠";
                document.getElementById('moviePoster').src = data.poster || "";
                document.getElementById('movieDesc').innerText = data.desc || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå";
                
                // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏á‡∏Ñ‡πå‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏µ‡∏î‡∏≠‡∏≠‡∏Å (‡∏õ‡∏∏‡πà‡∏° VIP)
                // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£ redirect
                document.getElementById('btnRedirect').href = data.link || "#";

                // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                if (data.category === 'chinese_series_vertical' && data.link) {
                    const embedUrl = data.link.replace('watch?v=', 'embed/');
                    document.getElementById('videoContainer').innerHTML = `
                        <div style="position:relative; padding-bottom:177.77%; height:0; border-radius:15px; overflow:hidden; border:2px solid var(--primary);">
                            <iframe style="position:absolute; top:0; left:0; width:100%; height:100%;" src="${embedUrl}" frameborder="0" allowfullscreen></iframe>
                        </div>
                    `;
                }

                // ‡∏™‡∏±‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('main-card').style.display = 'block';

                if (data.banner) {
                    document.body.style.backgroundImage = `linear-gradient(rgba(5,5,5,0.85), rgba(5,5,5,0.95)), url("${data.banner}")`;
                    document.body.style.backgroundSize = 'cover';
                    document.body.style.backgroundPosition = 'center';
                }

            } else {
                window.location.href = 'index.html';
            }
        } catch (error) {
            console.error("Error:", error);
            document.getElementById('loadingState').innerText = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
        }
    }

    function toggleDetails() {
        const detail = document.getElementById('detailSection');
        detail.style.display = (detail.style.display === 'none' || detail.style.display === '') ? 'block' : 'none';
    }

    initVIPPage();
</script>
</body>
</html>